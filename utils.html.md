% Miscellaneous utilities
% Marc Coiffier

Reminder : all builtin functions can be found documented [here](lexicon.html)

#### Exporting definitions

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 2"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'defX">'defX</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="dupn">dupn</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="def">def</span> <span class="symbol" data-symbol-name="export">export</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="def">def</span> <span class="symbol" data-symbol-name="'defX">'defX</span> <span class="symbol" data-symbol-name="export">export</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Navigating the environment

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 8"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'show-context">'show-context</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span>
   <span class="symbol" data-symbol-name="&quot;&quot;">&quot;&quot;</span> <span class="symbol" data-symbol-name="hypotheses">hypotheses</span>
   <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="dup">dup</span> <span class="symbol" data-symbol-name="variable">variable</span> <span class="symbol" data-symbol-name="type">type</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="&quot;%s : %v\n%s&quot;">&quot;%s : %v\n%s&quot;</span> <span class="symbol" data-symbol-name="format">format</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="each">each</span>
   <span class="symbol" data-symbol-name="print">print</span> <span class="symbol" data-symbol-name="pop">pop</span>
 <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'showdef">'showdef</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="pattern-index">pattern-index</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="swapn">swapn</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="index-insert">index-insert</span> <span class="symbol" data-symbol-name="set-pattern-index">set-pattern-index</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'vis">'vis</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="show-context">show-context</span> <span class="symbol" data-symbol-name="&quot;-------\n&quot;">&quot;-------\n&quot;</span> <span class="symbol" data-symbol-name="printf">printf</span> <span class="symbol" data-symbol-name="show-stack">show-stack</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Binders and contexts

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 5"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'binder">'binder</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="2">2</span> <span class="symbol" data-symbol-name="shaft">shaft</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-exec"><span class="symbol" data-symbol-name="${">${</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="-&gt;">-&gt;</span> <span class="quote quote-exec"><span class="symbol" data-symbol-name="${">${</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="quote quote-exec"><span class="symbol" data-symbol-name="${">${</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'funs">'funs</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="reverse">reverse</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="'!">'!</span> <span class="symbol" data-symbol-name="$">$</span> <span class="symbol" data-symbol-name="binder">binder</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="each">each</span> <span class="symbol" data-symbol-name="exec">exec</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'prods">'prods</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="reverse">reverse</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="'?">'?</span> <span class="symbol" data-symbol-name="$">$</span> <span class="symbol" data-symbol-name="binder">binder</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="each">each</span> <span class="symbol" data-symbol-name="exec">exec</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'#">'#</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="cons">cons</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Constructing typed terms

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 2"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'Type">'Type</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="0">0</span> <span class="symbol" data-symbol-name="universe">universe</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 6"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'foralls">'foralls</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="extro-forall">extro-forall</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="times">times</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'lambdas">'lambdas</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="extro-lambda">extro-lambda</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="times">times</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'applys">'applys</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="range">range</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="pop">pop</span> <span class="symbol" data-symbol-name="apply">apply</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="each">each</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'applyl">'applyl</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="apply">apply</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="each">each</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'recursor">'recursor</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="dup">dup</span> <span class="symbol" data-symbol-name="2">2</span> <span class="symbol" data-symbol-name="shaft">shaft</span> <span class="symbol" data-symbol-name="-&gt;">-&gt;</span> <span class="symbol" data-symbol-name="variable">variable</span> <span class="symbol" data-symbol-name="mu">mu</span> <span class="symbol" data-symbol-name="!">!</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 3"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'(">'(</span> <span class="symbol" data-symbol-name="'[">'[</span> <span class="symbol" data-symbol-name="$">$</span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="')">')</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="]">]</span> <span class="symbol" data-symbol-name="applyl">applyl</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Managing the type environment

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 4"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'-&gt;">'-&gt;</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="dup">dup</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="swapn">swapn</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="intro">intro</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-splice"><span class="symbol" data-symbol-name=",{">,{</span> <span class="symbol" data-symbol-name="dup">dup</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="variable">variable</span> <span class="symbol" data-symbol-name="pull">pull</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="def">def</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'!">'!</span> <span class="symbol" data-symbol-name="'extro-lambda">'extro-lambda</span> <span class="symbol" data-symbol-name="$">$</span> <span class="symbol" data-symbol-name="defX">defX</span>
<span class="symbol" data-symbol-name="'?">'?</span> <span class="symbol" data-symbol-name="'extro-forall">'extro-forall</span> <span class="symbol" data-symbol-name="$">$</span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Defining inductive constructors

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 2"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'defconstr">'defconstr</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="dupn">dupn</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="showdef">showdef</span> <span class="symbol" data-symbol-name="def">def</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>

#### Acting on list as stacks

<label class="expansible box"><span class="expand-else capricon-show"></span><span class="expand-else capricon-hide"></span><span class="expand-then" style="--num-lines: 7"><div class="capricon-steps"><pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="'in-list">'in-list</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span>
  <span class="symbol" data-symbol-name="swap">swap</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span>
    <span class="quote quote-splice"><span class="symbol" data-symbol-name=",{">,{</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="set-stack">set-stack</span> <span class="quote quote-exec"><span class="symbol" data-symbol-name="${">${</span> <span class="symbol" data-symbol-name="}">}</span></span>
    <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="quote quote-splice"><span class="symbol" data-symbol-name=",{">,{</span> <span class="quote quote-splice"><span class="symbol" data-symbol-name=",{">,{</span> <span class="symbol" data-symbol-name="stack">stack</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="set-stack">set-stack</span> <span class="quote quote-splice"><span class="symbol" data-symbol-name=",{">,{</span> <span class="symbol" data-symbol-name="stack">stack</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="exec">exec</span>
  <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="exec">exec</span>
<span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="defX">defX</span></pre><div class="capricon-examples"><button class="capricon-example" data-code="[ 4 3 2 1 ] { + + + } in-list vis"><pre class="capricon"><span class="symbol" data-symbol-name="[">[</span> <span class="symbol" data-symbol-name="4">4</span> <span class="symbol" data-symbol-name="3">3</span> <span class="symbol" data-symbol-name="2">2</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="]">]</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="+">+</span> <span class="symbol" data-symbol-name="+">+</span> <span class="symbol" data-symbol-name="+">+</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="in-list">in-list</span> <span class="symbol" data-symbol-name="vis">vis</span></pre></button><button class="capricon-example" data-code="[ 'a 'b 'c ] { 2 shift pop } in-list vis"><pre class="capricon"><span class="symbol" data-symbol-name="[">[</span> <span class="symbol" data-symbol-name="'a">'a</span> <span class="symbol" data-symbol-name="'b">'b</span> <span class="symbol" data-symbol-name="'c">'c</span> <span class="symbol" data-symbol-name="]">]</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="2">2</span> <span class="symbol" data-symbol-name="shift">shift</span> <span class="symbol" data-symbol-name="pop">pop</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="in-list">in-list</span> <span class="symbol" data-symbol-name="vis">vis</span></pre></button><button class="capricon-example" data-code="[ 1 2 3 4 ] { swap } in-list vis"><pre class="capricon"><span class="symbol" data-symbol-name="[">[</span> <span class="symbol" data-symbol-name="1">1</span> <span class="symbol" data-symbol-name="2">2</span> <span class="symbol" data-symbol-name="3">3</span> <span class="symbol" data-symbol-name="4">4</span> <span class="symbol" data-symbol-name="]">]</span> <span class="quote quote-brace"><span class="symbol" data-symbol-name="{">{</span> <span class="symbol" data-symbol-name="swap">swap</span> <span class="symbol" data-symbol-name="}">}</span></span> <span class="symbol" data-symbol-name="in-list">in-list</span> <span class="symbol" data-symbol-name="vis">vis</span></pre></button></div><div class="user-input interactive"><button class="capricon-trigger">Try It Out</button><label class="capricon-input-prefix">&gt;&nbsp;<input type="text" class="capricon-input" /></label><pre class="capricon-output"></pre></div></div></span></label><div class="capricon-paragraphresult"></div>
